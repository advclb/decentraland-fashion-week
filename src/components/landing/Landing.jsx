import * as React from 'react';
import {useContext} from 'react';
import {ContentContext} from '../../context/ContentContext.js';

import {BLOCKS} from '@contentful/rich-text-types';
import {documentToReactComponents} from '@contentful/rich-text-react-renderer';
import {LandingCountdown} from './LandingCountdown.jsx';

export const Landing = () => {

    const {data} = useContext(ContentContext);
    const landing = data?.landing;

    const options = {
        renderNode: {
            [BLOCKS.PARAGRAPH]: (node, children) => <h1>{children}</h1>,
        }
    };

    const startDate = landing?.startDate ? new Date(landing?.startDate) : undefined
    const endDate = landing?.endDate ? new Date(landing?.endDate) : undefined;
    const month = startDate?.toLocaleString('default', {month: 'long'})
    const dateText = month + ' ' + startDate?.getDate() + '-' + endDate?.getDate();

    return (
        <section id="landing">
            <div className={'landing__background'}>
                <picture>
                    <img
                        sizes="(max-width: 2170px) 100vw, 2170px"
                        srcSet="
Portrait_huietg_c_scale,w_350.jpg 350w,
Portrait_huietg_c_scale,w_859.jpg 859w,
Portrait_huietg_c_scale,w_1232.jpg 1232w,
Portrait_huietg_c_scale,w_1556.jpg 1556w,
Portrait_huietg_c_scale,w_1917.jpg 1917w,
Portrait_huietg_c_scale,w_2069.jpg 2069w,
Portrait_huietg_c_scale,w_2170.jpg 2170w"
                        src="Portrait_huietg_c_scale,w_2170.jpg"
                        alt=""/>
                </picture>
            </div>
            <div className={'landing__content'}>
                <div>
                    {landing?.heroTitle &&
                        <svg width="211" height="58" viewBox="0 0 211 58" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M182.22 0C176.862 0.00881359 171.614 1.54194 167.082 4.423C162.549 7.30407 158.916 11.416 156.6 16.2858C154.289 11.4119 150.657 7.29647 146.123 4.41549C141.589 1.53451 136.339 0.00561853 130.979 0.00561853C125.619 0.00561853 120.368 1.53451 115.834 4.41549C111.301 7.29647 107.668 11.4119 105.358 16.2858C103.048 11.4119 99.4154 7.29647 94.8815 4.41549C90.3476 1.53451 85.0972 0.00561853 79.7372 0.00561853C74.3771 0.00561853 69.1264 1.53451 64.5925 4.41549C60.0586 7.29647 56.4266 11.4119 54.1163 16.2858C51.3279 10.4237 46.6458 5.69031 40.8375 2.86177C35.0292 0.0332197 28.4396 -0.722621 22.1491 0.71818C15.8586 2.15898 10.2404 5.71091 6.21597 10.7916C2.19159 15.8722 0 22.1801 0 28.6808C0 35.1816 2.19159 41.4895 6.21597 46.5701C10.2404 51.6508 15.8586 55.2027 22.1491 56.6435C28.4396 58.0843 35.0292 57.3285 40.8375 54.4999C46.6458 51.6714 51.3279 46.938 54.1163 41.0759C56.4266 45.9498 60.0586 50.0652 64.5925 52.9462C69.1264 55.8272 74.3771 57.3561 79.7372 57.3561C85.0972 57.3561 90.3476 55.8272 94.8815 52.9462C99.4154 50.0652 103.048 45.9498 105.358 41.0759C107.668 45.9498 111.301 50.0652 115.834 52.9462C120.368 55.8272 125.619 57.3561 130.979 57.3561C136.339 57.3561 141.589 55.8272 146.123 52.9462C150.657 50.0652 154.289 45.9498 156.6 41.0759C158.801 45.6943 162.191 49.6335 166.416 52.4834C170.642 55.3333 175.548 56.9896 180.624 57.2799C185.7 57.5703 190.761 56.484 195.279 54.1342C199.797 51.7844 203.608 48.257 206.314 43.9193C209.02 39.5816 210.522 34.5922 210.665 29.4706C210.807 24.3489 209.585 19.2824 207.125 14.7985C204.665 10.3145 201.057 6.57716 196.677 3.97549C192.297 1.37382 187.305 0.00298118 182.22 0.00571117V0ZM28.4955 51.6345C23.9889 51.6345 19.5836 50.2878 15.8365 47.7647C12.0894 45.2416 9.16883 41.6554 7.44429 37.4597C5.71974 33.2639 5.26849 28.647 6.14779 24.1929C7.02709 19.7388 9.19743 15.6474 12.3842 12.4362C15.5709 9.22505 19.6312 7.0383 24.0512 6.15248C28.4713 5.26667 33.0527 5.72158 37.2162 7.45971C41.3797 9.19783 44.9383 12.1411 47.4418 15.9173C49.9453 19.6935 51.2814 24.133 51.2811 28.6744C51.274 34.7619 48.8709 40.5979 44.5993 44.9022C40.3276 49.2066 34.5363 51.6277 28.4955 51.6345ZM79.7372 51.6345C75.2305 51.6345 70.8253 50.2878 67.0782 47.7647C63.3311 45.2416 60.4105 41.6554 58.6859 37.4597C56.9614 33.2639 56.5101 28.647 57.3894 24.1929C58.2687 19.7388 60.4391 15.6474 63.6258 12.4362C66.8126 9.22505 70.8728 7.0383 75.2929 6.15248C79.7129 5.26667 84.2944 5.72158 88.4579 7.45971C92.6214 9.19783 96.1799 12.1411 98.6834 15.9173C101.187 19.6935 102.523 24.133 102.523 28.6744C102.516 34.7619 100.113 40.5979 95.8409 44.9022C91.5693 49.2066 85.778 51.6277 79.7372 51.6345ZM130.979 51.6345C126.472 51.6345 122.067 50.2878 118.32 47.7647C114.573 45.2416 111.652 41.6554 109.928 37.4597C108.203 33.2639 107.752 28.647 108.631 24.1929C109.51 19.7388 111.681 15.6474 114.867 12.4362C118.054 9.22505 122.114 7.0383 126.535 6.15248C130.955 5.26667 135.536 5.72158 139.7 7.45971C143.863 9.19783 147.422 12.1411 149.925 15.9173C152.429 19.6935 153.765 24.133 153.764 28.6744C153.757 34.7619 151.354 40.5979 147.083 44.9022C142.811 49.2066 137.02 51.6277 130.979 51.6345ZM182.22 51.6345C177.714 51.6345 173.309 50.2878 169.561 47.7647C165.814 45.2416 162.894 41.6554 161.169 37.4597C159.445 33.2639 158.993 28.647 159.873 24.1929C160.752 19.7388 162.922 15.6474 166.109 12.4362C169.296 9.22505 173.356 7.0383 177.776 6.15248C182.196 5.26667 186.778 5.72158 190.941 7.45971C195.105 9.19783 198.663 12.1411 201.167 15.9173C203.67 19.6935 205.006 24.133 205.006 28.6744C204.999 34.7619 202.596 40.5979 198.324 44.9022C194.053 49.2066 188.261 51.6277 182.22 51.6345Z"
                                fill="white"/>
                            <path
                                d="M17.9932 38.8344V18.5157H25.6638L28.7656 29.8829H28.8209L31.9241 18.5157H39.6501V38.8344H34.3212V26.1029H34.2634L30.909 38.8344H26.5938L23.2383 26.1029H23.1816V38.8344H17.9932Z"
                                fill="white"/>
                            <path
                                d="M76.4238 38.8344L69.9648 18.5157H76.0282L78.7925 28.0644L79.7848 32.0144H79.8415C80.1799 30.5372 80.5106 29.2206 80.8338 28.0644L83.5417 18.5157H89.5196L83.034 38.8344H76.4238Z"
                                fill="white"/>
                            <path
                                d="M123.833 38.8344V18.5157H139.372V23.5158H129.732V26.8401H137.712V31.4444H129.732V38.8344H123.833Z"
                                fill="white"/>
                            <path
                                d="M173.648 38.8342L168.486 18.5156H174.381L175.847 25.4784L176.839 31.1328H176.894C177.251 29.1051 177.6 27.3151 177.939 25.7627L179.489 18.5156H184.819L186.37 25.7042L187.386 31.1328H187.442C187.799 28.8413 188.137 26.9365 188.456 25.4184L189.924 18.5127H195.958L190.657 38.8314H184.703L182.898 30.2213L182.189 26.2713H182.132C181.907 27.7294 181.671 29.0461 181.424 30.2213L179.676 38.8314L173.648 38.8342Z"
                                fill="white"/>
                        </svg>
                    }
                    {documentToReactComponents(landing?.heroTitle, options)}


                    {landing?.startTime &&
                        <time dateTime={landing?.startTime}>
                            <svg width="478" height="79" viewBox="0 0 478 79" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_b_2562_1516)">
                                    <ellipse cx="238.958" cy="39.0888" rx="238.958" ry="39.0888"
                                             fill="url(#paint0_linear_2562_1516)" fillOpacity="0.3"/>
                                    <path
                                        d="M477.179 39.0888C477.179 41.4593 475.71 43.9047 472.601 46.3905C469.502 48.8677 464.887 51.2898 458.872 53.6161C446.85 58.2656 429.41 62.4672 407.808 66.0009C364.615 73.0664 304.917 77.4401 238.958 77.4401C172.999 77.4401 113.301 73.0664 70.1083 66.0009C48.506 62.4672 31.0666 58.2656 19.0445 53.6161C13.0297 51.2898 8.41408 48.8677 5.3153 46.3905C2.20568 43.9047 0.737525 41.4593 0.737525 39.0888C0.737525 36.7183 2.20568 34.273 5.3153 31.7871C8.41408 29.31 13.0297 26.8878 19.0445 24.5616C31.0666 19.912 48.506 15.7104 70.1083 12.1767C113.301 5.11122 172.999 0.737525 238.958 0.737525C304.917 0.737525 364.615 5.11122 407.808 12.1767C429.41 15.7104 446.85 19.912 458.872 24.5616C464.887 26.8878 469.502 29.31 472.601 31.7871C475.71 34.273 477.179 36.7183 477.179 39.0888Z"
                                        stroke="url(#paint1_linear_2562_1516)" strokeWidth="1.47505"/>
                                </g>
                                <defs>
                                    <filter id="filter0_b_2562_1516" x="-23.6008" y="-23.6008" width="525.118"
                                            height="125.379"
                                            filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
                                        <feFlood floodOpacity="0" result="BackgroundImageFix"/>
                                        <feGaussianBlur in="BackgroundImageFix" stdDeviation="11.8004"/>
                                        <feComposite in2="SourceAlpha" operator="in"
                                                     result="effect1_backgroundBlur_2562_1516"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_2562_1516"
                                                 result="shape"/>
                                    </filter>
                                    <linearGradient id="paint0_linear_2562_1516" x1="238.958" y1="66.4864" x2="238.958"
                                                    y2="-9.80173" gradientUnits="userSpaceOnUse">
                                        <stop stopColor="white"/>
                                        <stop offset="1" stopColor="white" stopOpacity="0"/>
                                    </linearGradient>
                                    <linearGradient id="paint1_linear_2562_1516" x1="238.958" y1="0" x2="238.115"
                                                    y2="78.2264"
                                                    gradientUnits="userSpaceOnUse">
                                        <stop stopColor="white"/>
                                        <stop offset="1" stopColor="white" stopOpacity="0"/>
                                    </linearGradient>
                                </defs>
                            </svg>

                            <span>{dateText}</span>
                        </time>
                    }
                </div>


                <LandingCountdown end={startDate}/>

            </div>
        </section>
    )
}
